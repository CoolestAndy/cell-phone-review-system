{% extends "base_menu.html" %}

{% block head %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/details.css' %}">
{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-sm-4 img-wrapper magnifier-thumb-wrapper">
                <img class="img-responsive" id="img" src="{{ item.image }}">
            </div>
            <div class="col-sm-8" id="preview">
                <a href="{{ item.url }}"><h2 id="title">{{ item.title }}</h2></a>
                <div class="rating-block col-sm-6" id="avg-rating">
                    <h4>Average user rating</h4>
                    <h2 id="rating" class="bold padding-bottom-7">{{ item.average_rating }} <small>/ 5.0</small></h2>
                    {% for rating in ratings.ticks %}
                        {% if item.average_rating >= rating %}
                            <button type="button" class="btn btn-warning btn-sm" aria-label="Left Align">
                                <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
                            </button>
                        {% else %}
                            <button type="button" class="btn btn-default btn-grey btn-sm" aria-label="Left Align">
                                <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
                            </button>
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="col-sm-6">
                    <h4>Rating breakdown</h4>
                    <div class="pull-left">
                        <div class="pull-left" style="width:35px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">5 <span class="glyphicon glyphicon-star"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                                <div id="progress-bar-rating-breakdown-5" class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="5"
                                    aria-valuemin="0" aria-valuemax="5" style="width: {{ ratings.percentage.5 }}">
                                </div>
                            </div>
                        </div>
                        <div id="label-rating-breakdown-5" class="pull-right" style="margin-left:10px;">{{ ratings.count.5 }}</div>
                    </div>
                    <div class="pull-left">
                        <div class="pull-left" style="width:35px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">4 <span class="glyphicon glyphicon-star"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                                <div id="progress-bar-rating-breakdown-4" class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="4"
                                    aria-valuemin="0" aria-valuemax="5" style="width: {{ ratings.percentage.4 }}">
                                </div>
                            </div>
                        </div>
                        <div id="label-rating-breakdown-4" class="pull-right" style="margin-left:10px;">{{ ratings.count.4 }}</div>
                    </div>
                    <div class="pull-left">
                        <div class="pull-left" style="width:35px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">3 <span class="glyphicon glyphicon-star"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                                <div id="progress-bar-rating-breakdown-3" class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="3"
                                    aria-valuemin="0" aria-valuemax="5" style="width: {{ ratings.percentage.3 }}">
                                </div>
                            </div>
                        </div>
                        <div id="label-rating-breakdown-3" class="pull-right" style="margin-left:10px;">{{ ratings.count.3 }}</div>
                    </div>
                    <div class="pull-left">
                        <div class="pull-left" style="width:35px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">2 <span class="glyphicon glyphicon-star"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                                <div id="progress-bar-rating-breakdown-2" class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="2"
                                    aria-valuemin="0" aria-valuemax="5" style="width: {{ ratings.percentage.2 }}">
                                </div>
                            </div>
                        </div>
                        <div id="label-rating-breakdown-2" class="pull-right" style="margin-left:10px;">{{ ratings.count.2 }}</div>
                    </div>
                    <div class="pull-left">
                        <div class="pull-left" style="width:35px; line-height:1;">
                            <div style="height:9px; margin:5px 0;">1 <span class="glyphicon glyphicon-star"></span></div>
                        </div>
                        <div class="pull-left" style="width:180px;">
                            <div class="progress" style="height:9px; margin:8px 0;">
                                <div id="progress-bar-rating-breakdown-1" class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="1"
                                    aria-valuemin="0" aria-valuemax="5" style="width: {{ ratings.percentage.1 }}">
                                </div>
                            </div>
                        </div>
                        <div id="label-rating-breakdown-1" class="pull-right" style="margin-left:10px;">{{ ratings.count.1 }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row col-sm-12">
            <div class="col-sm-12">
                <div class="review-block" id="review-block">
                    {% for review in reviews %}
                        <div class="row">
                            <div class="col-sm-2">
                                <div class="review-block-name">{{ review.author.username|safe }}</div>
                                <div class="review-block-date">{{ review.date }}</div>
                            </div>
                            <div class="col-sm-10">
                                {% for rating in ratings.ticks %}
                                    {% if review.rating.rating > rating %}
                                        <button class="btn btn-warning btn-xs" type="button" aria-label="Left Align"><span class="glyphicon glyphicon-star" aria-hidden="true"></span></button>
                                    {% else %}
                                        <button class="btn btn-default btn-grey btn-xs" type="button" aria-label="Left Align"><span class="glyphicon glyphicon-star" aria-hidden="true"></span></button>
                                    {% endif %}
                                {% endfor %}
                                <div class="review-block-title">{{ review.title|safe }}</div>
                                <div class="review-block-description">{{ review.body|safe }}</div>
                            </div>
                        </div>
                        <hr>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

{% endblock %}
